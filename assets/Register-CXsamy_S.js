import{d as T,r as g,m as E,n as U,c as o,i as y,e as a,w as b,a as s,F as h,p as L,f as d,v as c,u as r,g as O,k as q,j as A,o as e,_ as N}from"./index-CfFr6Gr-.js";import{u as F,A as R,m as S,r as v,e as B,_ as I,a as M,b as j}from"./AuthLayout-CBU3aTvU.js";const D={class:"sign-up__form"},G={action:""},z={class:"sign-up__input-group"},H={class:"sign-up__form-group"},J={key:0},K={key:0,class:"error"},Q={class:"sign-up__form-group"},W={key:0},X={key:0,class:"error"},Y={key:1,class:"error"},Z={class:"sign-up__form-group"},ss={key:0},ts={key:0,class:"error"},os={key:1,class:"error"},es={class:"sign-up__footer"},is={key:0,class:"otp-popup"},ns={class:"otp-popup__content"},as={class:"otp-inputs"},ls=["onUpdate:modelValue","onInput"],rs=T({__name:"Register",setup(us){g(!1);const m=g(!1),p=g(Array(6).fill("")),f=E(),w=l=>{const t=document.querySelectorAll(".otp-input");p.value[l]&&l<5&&t[l+1].focus()},i=U({name:"",email:"",password:""}),V={name:{required:v},email:{required:v,email:B},password:{required:v,minLength:S(6)}},n=F(V,i),$=async()=>{await n.value.$validate()&&(console.log("Form is valid",i),await f.SignUp(i),m.value=!0)},x=async()=>{const l=p.value.join("");console.log("Entered OTP:",l),await f.verifyEmailOTP(l,i.email)},C=()=>{m.value=!1};return(l,t)=>{const P=q("router-link");return e(),o(h,null,[y(R,null,{default:b(()=>[t[8]||(t[8]=s("div",null,[s("h1",{class:"sign-up__heading"},"Register")],-1)),s("div",D,[s("form",G,[s("div",z,[s("div",H,[d(s("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>i.name=u),class:"sign-up__input sign-up__input-password",type:"text",placeholder:"Username"},null,512),[[c,i.name]]),r(n).name.$error?(e(),o("div",J,[r(n).name.required.$invalid?(e(),o("p",K," Tên là bắt buộc! ")):a("",!0)])):a("",!0)]),s("div",Q,[d(s("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>i.email=u),class:"sign-up__input",type:"text",placeholder:"Email or phone number"},null,512),[[c,i.email]]),r(n).email.$error?(e(),o("div",W,[r(n).email.required.$invalid?(e(),o("p",X," Email là bắt buộc! ")):a("",!0),r(n).email.email.$invalid?(e(),o("p",Y," Email không hợp lệ ")):a("",!0)])):a("",!0)]),s("div",Z,[d(s("input",{"onUpdate:modelValue":t[2]||(t[2]=u=>i.password=u),class:"sign-up__input sign-up__input-password",type:"password",placeholder:"Password"},null,512),[[c,i.password]]),t[4]||(t[4]=s("img",{class:"sign-up__show-password",src:I,alt:""},null,-1)),r(n).password.$error?(e(),o("div",ss,[r(n).password.required.$invalid?(e(),o("p",ts," Mật khẩu là bắt buộc! ")):a("",!0),r(n).password.minLength.$invalid?(e(),o("p",os," Tối thiểu 6 ký tự ")):a("",!0)])):a("",!0)])]),s("button",{class:"sign-up__submit sign-up__form-group",type:"submit",onClick:t[3]||(t[3]=O(u=>$(),["prevent"]))},t[5]||(t[5]=[s("span",null,"Register",-1)]))])]),t[9]||(t[9]=s("div",{class:"sign-up__separator sign-up__form-group"},[s("span",{class:"sign-up__line"}),s("p",{class:"sign-up__or-text"},"or"),s("span",{class:"sign-up__line"})],-1)),t[10]||(t[10]=s("div",{class:"sign-up__social-auth"},[s("img",{class:"sign-up__social-icon sign-up__social-icon--facebook",src:M,alt:"Facebook login"}),s("img",{class:"sign-up__social-icon sign-up__social-icon--google",src:j,alt:"Google login"})],-1)),s("div",es,[t[7]||(t[7]=s("p",{class:"sign-up__footer-text"},"have an account?",-1)),y(P,{class:"sign-up__footer-link",to:{name:"login"}},{default:b(()=>t[6]||(t[6]=[A(" Login ")])),_:1})])]),_:1}),m.value?(e(),o("div",is,[s("div",ns,[t[11]||(t[11]=s("h2",null,"Enter OTP",-1)),t[12]||(t[12]=s("p",null,"Please enter the 6-digit OTP sent to your phone.",-1)),s("div",as,[(e(!0),o(h,null,L(p.value,(u,_)=>d((e(),o("input",{key:_,"onUpdate:modelValue":k=>p.value[_]=k,maxlength:"1",type:"text",class:"otp-input",onInput:k=>w(_)},null,40,ls)),[[c,p.value[_]]])),128))]),s("button",{onClick:x,class:"otp-submit"},"Submit"),s("button",{onClick:C,class:"otp-close"},"Close")])])):a("",!0)],64)}}}),ds=N(rs,[["__scopeId","data-v-727bc050"]]);export{ds as default};
